{"version":3,"sources":["useSearchBar.js"],"names":["useCallback","useState","useHistory","useDropdown","initialValues","search_query","useSearchBar","valid","setValid","elementRef","expanded","isAutoCompleteOpen","setExpanded","setIsAutoCompleteOpen","history","push","handleChange","value","hasValue","isValid","length","handleFocus","handleSubmit","trim","containerRef"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,QAAtB,QAAsC,OAAtC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,SAASC,WAAT,QAA4B,yBAA5B;AAEA,MAAMC,aAAa,GAAG;AAAEC,EAAAA,YAAY,EAAE;AAAhB,CAAtB;AAEA,OAAO,MAAMC,YAAY,GAAG,MAAM;AAC9B,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM;AACFQ,IAAAA,UADE;AAEFC,IAAAA,QAAQ,EAAEC,kBAFR;AAGFC,IAAAA,WAAW,EAAEC;AAHX,MAIFV,WAAW,EAJf;AAKA,QAAMW,OAAO,GAAGZ,UAAU,EAA1B;AACA,QAAM;AAAEa,IAAAA;AAAF,MAAWD,OAAjB,CAR8B,CAU9B;;AACA,QAAME,YAAY,GAAGhB,WAAW,CAC5BiB,KAAK,IAAI;AACL,UAAMC,QAAQ,GAAG,CAAC,CAACD,KAAnB;AACA,UAAME,OAAO,GAAGD,QAAQ,IAAID,KAAK,CAACG,MAAN,GAAe,CAA3C;AAEAZ,IAAAA,QAAQ,CAACW,OAAD,CAAR;AACAN,IAAAA,qBAAqB,CAACK,QAAD,CAArB;AACH,GAP2B,EAQ5B,CAACL,qBAAD,EAAwBL,QAAxB,CAR4B,CAAhC,CAX8B,CAsB9B;;AACA,QAAMa,WAAW,GAAGrB,WAAW,CAAC,MAAM;AAClCa,IAAAA,qBAAqB,CAAC,IAAD,CAArB;AACH,GAF8B,EAE5B,CAACA,qBAAD,CAF4B,CAA/B,CAvB8B,CA2B9B;;AACA,QAAMS,YAAY,GAAGtB,WAAW,CAC5B,CAAC;AAAEK,IAAAA;AAAF,GAAD,KAAsB;AAClB,QAAIA,YAAY,IAAI,IAAhB,IAAwBA,YAAY,CAACkB,IAAb,GAAoBH,MAApB,GAA6B,CAAzD,EAA4D;AACxDL,MAAAA,IAAI,8BAAuBV,YAAvB,EAAJ;AACAQ,MAAAA,qBAAqB,CAAC,KAAD,CAArB;AACH;AACJ,GAN2B,EAO5B,CAACE,IAAD,EAAOF,qBAAP,CAP4B,CAAhC;AAUA,SAAO;AACHW,IAAAA,YAAY,EAAEf,UADX;AAEHO,IAAAA,YAFG;AAGHK,IAAAA,WAHG;AAIHC,IAAAA,YAJG;AAKHlB,IAAAA,aALG;AAMHO,IAAAA,kBANG;AAOHE,IAAAA,qBAPG;AAQHL,IAAAA,QARG;AASHD,IAAAA;AATG,GAAP;AAWH,CAjDM","sourcesContent":["import { useCallback, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { useDropdown } from '../../hooks/useDropdown';\n\nconst initialValues = { search_query: '' };\n\nexport const useSearchBar = () => {\n    const [valid, setValid] = useState(false);\n    const {\n        elementRef,\n        expanded: isAutoCompleteOpen,\n        setExpanded: setIsAutoCompleteOpen\n    } = useDropdown();\n    const history = useHistory();\n    const { push } = history;\n\n    // expand or collapse on input change\n    const handleChange = useCallback(\n        value => {\n            const hasValue = !!value;\n            const isValid = hasValue && value.length > 2;\n\n            setValid(isValid);\n            setIsAutoCompleteOpen(hasValue);\n        },\n        [setIsAutoCompleteOpen, setValid]\n    );\n\n    // expand on focus\n    const handleFocus = useCallback(() => {\n        setIsAutoCompleteOpen(true);\n    }, [setIsAutoCompleteOpen]);\n\n    // navigate on submit\n    const handleSubmit = useCallback(\n        ({ search_query }) => {\n            if (search_query != null && search_query.trim().length > 0) {\n                push(`/search.html?query=${search_query}`);\n                setIsAutoCompleteOpen(false);\n            }\n        },\n        [push, setIsAutoCompleteOpen]\n    );\n\n    return {\n        containerRef: elementRef,\n        handleChange,\n        handleFocus,\n        handleSubmit,\n        initialValues,\n        isAutoCompleteOpen,\n        setIsAutoCompleteOpen,\n        setValid,\n        valid\n    };\n};\n"]}