{"version":3,"sources":["useProduct.js"],"names":["useCallback","useState","useMutation","useCartContext","useAwaitQuery","useProduct","props","beginEditItem","createCartMutation","getCartDetailsQuery","item","removeItemMutation","configurable_options","options","product","quantity","prices","price","small_image","image","name","isFavorite","setIsFavorite","isLoading","setIsLoading","removeItemFromCart","fetchCartId","removeItem","fetchCartDetails","handleFavoriteItem","handleEditItem","handleRemoveItem","productImage","url","productName","productOptions","productPrice","value","productQuantity"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,QAAtB,QAAsC,OAAtC;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,SAASC,cAAT,QAA+B,qCAA/B;AACA,SAASC,aAAT,QAA8B,4CAA9B;AAEA,OAAO,MAAMC,UAAU,GAAGC,KAAK,IAAI;AAC/B,QAAM;AACFC,IAAAA,aADE;AAEFC,IAAAA,kBAFE;AAGFC,IAAAA,mBAHE;AAIFC,IAAAA,IAJE;AAKFC,IAAAA;AALE,MAMFL,KANJ;AAOA,QAAM;AAAEM,IAAAA,oBAAoB,EAAEC,OAAxB;AAAiCC,IAAAA,OAAjC;AAA0CC,IAAAA,QAA1C;AAAoDC,IAAAA;AAApD,MAA+DN,IAArE;AACA,QAAM;AAAEO,IAAAA;AAAF,MAAYD,MAAlB;AACA,QAAM;AAAEE,IAAAA,WAAW,EAAEC,KAAf;AAAsBC,IAAAA;AAAtB,MAA+BN,OAArC;AAEA,QAAM,CAACO,UAAD,EAAaC,aAAb,IAA8BrB,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAACsB,SAAD,EAAYC,YAAZ,IAA4BvB,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,GAAG;AAAEwB,IAAAA;AAAF,GAAH,IAA6BtB,cAAc,EAAjD;AAEA,QAAM,CAACuB,WAAD,IAAgBxB,WAAW,CAACM,kBAAD,CAAjC;AACA,QAAM,CAACmB,UAAD,IAAezB,WAAW,CAACS,kBAAD,CAAhC;AACA,QAAMiB,gBAAgB,GAAGxB,aAAa,CAACK,mBAAD,CAAtC;AAEA,QAAMoB,kBAAkB,GAAG7B,WAAW,CAAC,MAAM;AACzCsB,IAAAA,aAAa,CAAC,CAACD,UAAF,CAAb;AACH,GAFqC,EAEnC,CAACA,UAAD,CAFmC,CAAtC;AAIA,QAAMS,cAAc,GAAG9B,WAAW,CAAC,MAAM;AACrCO,IAAAA,aAAa,CAACG,IAAD,CAAb;AACH,GAFiC,EAE/B,CAACH,aAAD,EAAgBG,IAAhB,CAF+B,CAAlC;AAIA,QAAMqB,gBAAgB,GAAG/B,WAAW,CAAC,MAAM;AACvCwB,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAC,IAAAA,kBAAkB,CAAC;AACff,MAAAA,IADe;AAEfkB,MAAAA,gBAFe;AAGfF,MAAAA,WAHe;AAIfC,MAAAA;AAJe,KAAD,CAAlB;AAMH,GARmC,EAQjC,CAACC,gBAAD,EAAmBF,WAAnB,EAAgChB,IAAhC,EAAsCiB,UAAtC,EAAkDF,kBAAlD,CARiC,CAApC;AAUA,SAAO;AACHK,IAAAA,cADG;AAEHD,IAAAA,kBAFG;AAGHE,IAAAA,gBAHG;AAIHV,IAAAA,UAJG;AAKHE,IAAAA,SALG;AAMHS,IAAAA,YAAY,EAAEb,KAAK,CAACc,GANjB;AAOHC,IAAAA,WAAW,EAAEd,IAPV;AAQHe,IAAAA,cAAc,EAAEtB,OARb;AASHuB,IAAAA,YAAY,EAAEnB,KAAK,CAACoB,KATjB;AAUHC,IAAAA,eAAe,EAAEvB;AAVd,GAAP;AAYH,CAlDM","sourcesContent":["import { useCallback, useState } from 'react';\nimport { useMutation } from '@apollo/client';\nimport { useCartContext } from '@magento/peregrine/lib/context/cart';\nimport { useAwaitQuery } from '@magento/peregrine/lib/hooks/useAwaitQuery';\n\nexport const useProduct = props => {\n    const {\n        beginEditItem,\n        createCartMutation,\n        getCartDetailsQuery,\n        item,\n        removeItemMutation\n    } = props;\n    const { configurable_options: options, product, quantity, prices } = item;\n    const { price } = prices;\n    const { small_image: image, name } = product;\n\n    const [isFavorite, setIsFavorite] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const [, { removeItemFromCart }] = useCartContext();\n\n    const [fetchCartId] = useMutation(createCartMutation);\n    const [removeItem] = useMutation(removeItemMutation);\n    const fetchCartDetails = useAwaitQuery(getCartDetailsQuery);\n\n    const handleFavoriteItem = useCallback(() => {\n        setIsFavorite(!isFavorite);\n    }, [isFavorite]);\n\n    const handleEditItem = useCallback(() => {\n        beginEditItem(item);\n    }, [beginEditItem, item]);\n\n    const handleRemoveItem = useCallback(() => {\n        setIsLoading(true);\n        removeItemFromCart({\n            item,\n            fetchCartDetails,\n            fetchCartId,\n            removeItem\n        });\n    }, [fetchCartDetails, fetchCartId, item, removeItem, removeItemFromCart]);\n\n    return {\n        handleEditItem,\n        handleFavoriteItem,\n        handleRemoveItem,\n        isFavorite,\n        isLoading,\n        productImage: image.url,\n        productName: name,\n        productOptions: options,\n        productPrice: price.value,\n        productQuantity: quantity\n    };\n};\n"]}