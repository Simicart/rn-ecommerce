{"version":3,"sources":["useEditModal.js"],"names":["useState","useCallback","useQuery","useCartContext","useEditModal","props","onClose","queries","getSelectedPaymentMethodQuery","isLoading","setIsLoading","updateButtonClicked","setUpdateButtonClicked","cartId","data","selectedPaymentMethodData","skip","variables","selectedPaymentMethod","cart","selected_payment_method","code","handleClose","handleUpdate","handlePaymentSuccess","handlePaymentError","handleDropinReady","resetUpdateButtonClicked"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,WAAnB,QAAsC,OAAtC;AACA,SAASC,QAAT,QAAyB,gBAAzB;AAEA,SAASC,cAAT,QAA+B,uBAA/B;AAEA;;;;;;;;;;;;;;;;;;;AAkBA,OAAO,MAAMC,YAAY,GAAGC,KAAK,IAAI;AACjC,QAAM;AACFC,IAAAA,OADE;AAEFC,IAAAA,OAAO,EAAE;AAAEC,MAAAA;AAAF;AAFP,MAGFH,KAHJ;AAKA;;;;AAIA,QAAM,CAACI,SAAD,EAAYC,YAAZ,IAA4BV,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM,CAACW,mBAAD,EAAsBC,sBAAtB,IAAgDZ,QAAQ,CAAC,KAAD,CAA9D;AACA,QAAM,CAAC;AAAEa,IAAAA;AAAF,GAAD,IAAeV,cAAc,EAAnC;AAEA;;;;AAIA,QAAM;AAAEW,IAAAA,IAAI,EAAEC;AAAR,MAAsCb,QAAQ,CAChDM,6BADgD,EAEhD;AACIQ,IAAAA,IAAI,EAAE,CAACH,MADX;AAEII,IAAAA,SAAS,EAAE;AACPJ,MAAAA;AADO;AAFf,GAFgD,CAApD;AASA,QAAMK,qBAAqB,GAAGH,yBAAyB,GACjDA,yBAAyB,CAACI,IAA1B,CAA+BC,uBAA/B,CAAuDC,IADN,GAEjD,IAFN;AAIA;;;;AAIA,QAAMC,WAAW,GAAGrB,WAAW,CAAC,MAAM;AAClCK,IAAAA,OAAO;AACV,GAF8B,EAE5B,CAACA,OAAD,CAF4B,CAA/B;AAIA,QAAMiB,YAAY,GAAGtB,WAAW,CAAC,MAAM;AACnCW,IAAAA,sBAAsB,CAAC,IAAD,CAAtB;AACH,GAF+B,EAE7B,CAACA,sBAAD,CAF6B,CAAhC;AAIA,QAAMY,oBAAoB,GAAGvB,WAAW,CAAC,MAAM;AAC3CK,IAAAA,OAAO;AACV,GAFuC,EAErC,CAACA,OAAD,CAFqC,CAAxC;AAIA,QAAMmB,kBAAkB,GAAGxB,WAAW,CAAC,MAAM;AACzCW,IAAAA,sBAAsB,CAAC,KAAD,CAAtB;AACH,GAFqC,EAEnC,EAFmC,CAAtC;AAIA,QAAMc,iBAAiB,GAAGzB,WAAW,CAAC,MAAM;AACxCS,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,GAFoC,EAElC,CAACA,YAAD,CAFkC,CAArC;AAIA,QAAMiB,wBAAwB,GAAG1B,WAAW,CAAC,MAAM;AAC/CW,IAAAA,sBAAsB,CAAC,KAAD,CAAtB;AACH,GAF2C,EAEzC,CAACA,sBAAD,CAFyC,CAA5C;AAIA,SAAO;AACHM,IAAAA,qBADG;AAEHT,IAAAA,SAFG;AAGHE,IAAAA,mBAHG;AAIHW,IAAAA,WAJG;AAKHC,IAAAA,YALG;AAMHC,IAAAA,oBANG;AAOHC,IAAAA,kBAPG;AAQHC,IAAAA,iBARG;AASHC,IAAAA;AATG,GAAP;AAWH,CAtEM","sourcesContent":["import { useState, useCallback } from 'react';\nimport { useQuery } from '@apollo/client';\n\nimport { useCartContext } from '../../../context/cart';\n\n/**\n * Talon to handle checkout page's payment information edit modal.\n *\n * @param {Function} props.onClose callback to be called when the modal's close or cancel button is clicked.\n * @param {DocumentNode} props.queries.getSelectedPaymentMethodQuery query to fetch the payment method that was used in the payment information checkout step\n *\n * @returns {\n *   selectedPaymentMethod: String,\n *   isLoading: Boolean,\n *   updateButtonClicked: Boolean,\n *   handleClose: Function,\n *   handleUpdate: Function,\n *   handlePaymentSuccess: Function,\n *   handleDropinReady: Function,\n *   handlePaymentError: Function,\n *   resetUpdateButtonClicked: Function\n * }\n */\nexport const useEditModal = props => {\n    const {\n        onClose,\n        queries: { getSelectedPaymentMethodQuery }\n    } = props;\n\n    /**\n     * Definitions\n     */\n\n    const [isLoading, setIsLoading] = useState(true);\n    const [updateButtonClicked, setUpdateButtonClicked] = useState(false);\n    const [{ cartId }] = useCartContext();\n\n    /**\n     * Queries\n     */\n\n    const { data: selectedPaymentMethodData } = useQuery(\n        getSelectedPaymentMethodQuery,\n        {\n            skip: !cartId,\n            variables: {\n                cartId\n            }\n        }\n    );\n    const selectedPaymentMethod = selectedPaymentMethodData\n        ? selectedPaymentMethodData.cart.selected_payment_method.code\n        : null;\n\n    /**\n     * Helper Functions\n     */\n\n    const handleClose = useCallback(() => {\n        onClose();\n    }, [onClose]);\n\n    const handleUpdate = useCallback(() => {\n        setUpdateButtonClicked(true);\n    }, [setUpdateButtonClicked]);\n\n    const handlePaymentSuccess = useCallback(() => {\n        onClose();\n    }, [onClose]);\n\n    const handlePaymentError = useCallback(() => {\n        setUpdateButtonClicked(false);\n    }, []);\n\n    const handleDropinReady = useCallback(() => {\n        setIsLoading(false);\n    }, [setIsLoading]);\n\n    const resetUpdateButtonClicked = useCallback(() => {\n        setUpdateButtonClicked(false);\n    }, [setUpdateButtonClicked]);\n\n    return {\n        selectedPaymentMethod,\n        isLoading,\n        updateButtonClicked,\n        handleClose,\n        handleUpdate,\n        handlePaymentSuccess,\n        handlePaymentError,\n        handleDropinReady,\n        resetUpdateButtonClicked\n    };\n};\n"]}