{"version":3,"sources":["user.js"],"names":["BrowserPersistence","Util","storage","name","isSignedIn","getItem","initialState","currentUser","email","firstname","lastname","getDetailsError","isGettingDetails","isResettingPassword","resetPasswordError","token","reducerMap","actions","setToken","state","payload","clearToken","getDetails","request","receive","error","resetPassword","reset"],"mappings":";;;;;;;AAAA;;AAEA;;AAKA;;;;AAJA,MAAM;AAAEA,EAAAA;AAAF,IAAyBC,WAA/B;AAEA,MAAMC,OAAO,GAAG,IAAIF,kBAAJ,EAAhB;AAIO,MAAMG,IAAI,GAAG,MAAb;;;AAEP,MAAMC,UAAU,GAAG,MAAM,CAAC,CAACF,OAAO,CAACG,OAAR,CAAgB,cAAhB,CAA3B;;AAEA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,WAAW,EAAE;AACTC,IAAAA,KAAK,EAAE,EADE;AAETC,IAAAA,SAAS,EAAE,EAFF;AAGTC,IAAAA,QAAQ,EAAE;AAHD,GADI;AAMjBC,EAAAA,eAAe,EAAE,IANA;AAOjBC,EAAAA,gBAAgB,EAAE,KAPD;AAQjBC,EAAAA,mBAAmB,EAAE,KARJ;AASjBT,EAAAA,UAAU,EAAEA,UAAU,EATL;AAUjBU,EAAAA,kBAAkB,EAAE,IAVH;AAWjBC,EAAAA,KAAK,EAAEb,OAAO,CAACG,OAAR,CAAgB,cAAhB;AAXU,CAArB;AAcA,MAAMW,UAAU,GAAG;AACf,GAACC,cAAQC,QAAT,GAAoB,CAACC,KAAD,EAAQ;AAAEC,IAAAA;AAAF,GAAR,KAAwB;AACxC,WAAO,EACH,GAAGD,KADA;AAEHf,MAAAA,UAAU,EAAE,IAFT;AAGHW,MAAAA,KAAK,EAAEK;AAHJ,KAAP;AAKH,GAPc;AAQf,GAACH,cAAQI,UAAT,GAAsBF,KAAK,IAAI;AAC3B,WAAO,EACH,GAAGA,KADA;AAEHf,MAAAA,UAAU,EAAE,KAFT;AAGHW,MAAAA,KAAK,EAAE;AAHJ,KAAP;AAKH,GAdc;AAef,GAACE,cAAQK,UAAR,CAAmBC,OAApB,GAA8BJ,KAAK,IAAI;AACnC,WAAO,EACH,GAAGA,KADA;AAEHR,MAAAA,eAAe,EAAE,IAFd;AAGHC,MAAAA,gBAAgB,EAAE;AAHf,KAAP;AAKH,GArBc;AAsBf,GAACK,cAAQK,UAAR,CAAmBE,OAApB,GAA8B,CAACL,KAAD,EAAQ;AAAEC,IAAAA,OAAF;AAAWK,IAAAA;AAAX,GAAR,KAA+B;AACzD,QAAIA,KAAJ,EAAW;AACP,aAAO,EACH,GAAGN,KADA;AAEHR,QAAAA,eAAe,EAAES,OAFd;AAGHR,QAAAA,gBAAgB,EAAE;AAHf,OAAP;AAKH;;AAED,WAAO,EACH,GAAGO,KADA;AAEHZ,MAAAA,WAAW,EAAEa,OAFV;AAGHT,MAAAA,eAAe,EAAE,IAHd;AAIHC,MAAAA,gBAAgB,EAAE;AAJf,KAAP;AAMH,GArCc;AAsCf,GAACK,cAAQS,aAAR,CAAsBH,OAAvB,GAAiCJ,KAAK,KAAK,EACvC,GAAGA,KADoC;AAEvCN,IAAAA,mBAAmB,EAAE;AAFkB,GAAL,CAtCvB;AA0Cf;AACA,GAACI,cAAQS,aAAR,CAAsBF,OAAvB,GAAiC,CAACL,KAAD,EAAQ;AAAEC,IAAAA,OAAF;AAAWK,IAAAA;AAAX,GAAR,KAA+B;AAC5D,QAAIA,KAAJ,EAAW;AACP,aAAO,EACH,GAAGN,KADA;AAEHN,QAAAA,mBAAmB,EAAE,KAFlB;AAGHC,QAAAA,kBAAkB,EAAEM;AAHjB,OAAP;AAKH;;AAED,WAAO,EACH,GAAGD,KADA;AAEHN,MAAAA,mBAAmB,EAAE,KAFlB;AAGHC,MAAAA,kBAAkB,EAAE;AAHjB,KAAP;AAKH,GAzDc;AA0Df,GAACG,cAAQU,KAAT,GAAiB,MAAM;AACnB,WAAO,EACH,GAAGrB,YADA;AAEHF,MAAAA,UAAU,EAAE,KAFT;AAGHW,MAAAA,KAAK,EAAE;AAHJ,KAAP;AAKH;AAhEc,CAAnB;;eAmEe,iCAAcC,UAAd,EAA0BV,YAA1B,C","sourcesContent":["import { handleActions } from 'redux-actions';\n\nimport { Util } from '../../index';\nconst { BrowserPersistence } = Util;\n\nconst storage = new BrowserPersistence();\n\nimport actions from '../actions/user';\n\nexport const name = 'user';\n\nconst isSignedIn = () => !!storage.getItem('signin_token');\n\nconst initialState = {\n    currentUser: {\n        email: '',\n        firstname: '',\n        lastname: ''\n    },\n    getDetailsError: null,\n    isGettingDetails: false,\n    isResettingPassword: false,\n    isSignedIn: isSignedIn(),\n    resetPasswordError: null,\n    token: storage.getItem('signin_token')\n};\n\nconst reducerMap = {\n    [actions.setToken]: (state, { payload }) => {\n        return {\n            ...state,\n            isSignedIn: true,\n            token: payload\n        };\n    },\n    [actions.clearToken]: state => {\n        return {\n            ...state,\n            isSignedIn: false,\n            token: null\n        };\n    },\n    [actions.getDetails.request]: state => {\n        return {\n            ...state,\n            getDetailsError: null,\n            isGettingDetails: true\n        };\n    },\n    [actions.getDetails.receive]: (state, { payload, error }) => {\n        if (error) {\n            return {\n                ...state,\n                getDetailsError: payload,\n                isGettingDetails: false\n            };\n        }\n\n        return {\n            ...state,\n            currentUser: payload,\n            getDetailsError: null,\n            isGettingDetails: false\n        };\n    },\n    [actions.resetPassword.request]: state => ({\n        ...state,\n        isResettingPassword: true\n    }),\n    // TODO: handle the reset password response from the API.\n    [actions.resetPassword.receive]: (state, { payload, error }) => {\n        if (error) {\n            return {\n                ...state,\n                isResettingPassword: false,\n                resetPasswordError: payload\n            };\n        }\n\n        return {\n            ...state,\n            isResettingPassword: false,\n            resetPasswordError: null\n        };\n    },\n    [actions.reset]: () => {\n        return {\n            ...initialState,\n            isSignedIn: false,\n            token: null\n        };\n    }\n};\n\nexport default handleActions(reducerMap, initialState);\n"]}