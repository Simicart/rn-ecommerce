{"version":3,"sources":["useAccountChip.js"],"names":["useAccountChip","props","queries","getCustomerDetailsQuery","isSignedIn","isUserSignedIn","data","fetchPolicy","nextFetchPolicy","skip","currentUser","customer","isLoadingUserName"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;;;;;;;;;;AAWO,MAAMA,cAAc,GAAGC,KAAK,IAAI;AACnC,QAAM;AACFC,IAAAA,OAAO,EAAE;AAAEC,MAAAA;AAAF;AADP,MAEFF,KAFJ;AAGA,QAAM,CAAC;AAAEG,IAAAA,UAAU,EAAEC;AAAd,GAAD,IAAmC,2BAAzC;AAEA,QAAM;AAAEC,IAAAA;AAAF,MAAW,sBAASH,uBAAT,EAAkC;AAC/CI,IAAAA,WAAW,EAAE,mBADkC;AAE/CC,IAAAA,eAAe,EAAE,aAF8B;AAG/CC,IAAAA,IAAI,EAAE,CAACJ;AAHwC,GAAlC,CAAjB;AAMA,QAAMK,WAAW,GAAG,oBAAQ,MAAM;AAC9B,WAAQJ,IAAI,IAAIA,IAAI,CAACK,QAAd,IAA2B,IAAlC;AACH,GAFmB,EAEjB,CAACL,IAAD,CAFiB,CAApB;AAIA,SAAO;AACHI,IAAAA,WADG;AAEHE,IAAAA,iBAAiB,EAAEP,cAAc,IAAI,CAACK,WAFnC;AAGHL,IAAAA;AAHG,GAAP;AAKH,CArBM","sourcesContent":["import { useMemo } from 'react';\nimport { useQuery } from '@apollo/client';\nimport { useUserContext } from '@magento/peregrine/lib/context/user';\n\n/**\n * The useAccountChip talon supports the AccountChip component.\n *\n * @param {GraphQLAST} props.queries.getCustomerDetailsQuery\n *\n * @returns {Object} talonProps\n * @returns {Object} talonProps.currentUser - Details about the currently signed-in user.\n * @returns {Bool}   talonProps.isLoadingUserName - Indicates when we know there is a\n *  user signed in, but we don't yet have their name.\n * @returns {Bool}   talonProps.isUserSignedIn - Indicates whether we have a signed-in user.\n */\nexport const useAccountChip = props => {\n    const {\n        queries: { getCustomerDetailsQuery }\n    } = props;\n    const [{ isSignedIn: isUserSignedIn }] = useUserContext();\n\n    const { data } = useQuery(getCustomerDetailsQuery, {\n        fetchPolicy: 'cache-and-network',\n        nextFetchPolicy: 'cache-first',\n        skip: !isUserSignedIn\n    });\n\n    const currentUser = useMemo(() => {\n        return (data && data.customer) || null;\n    }, [data]);\n\n    return {\n        currentUser,\n        isLoadingUserName: isUserSignedIn && !currentUser,\n        isUserSignedIn\n    };\n};\n"]}