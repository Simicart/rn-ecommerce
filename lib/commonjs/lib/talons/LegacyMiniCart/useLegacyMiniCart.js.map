{"version":3,"sources":["useLegacyMiniCart.js"],"names":["useLegacyMiniCart","drawer","closeDrawer","cartState","cancelCheckout","isEditingItem","setIsEditingItem","step","setStep","derivedDetails","details","isLoading","isUpdatingItem","items","currencyCode","numItems","subtotal","shouldShowFooter","isEmpty","isMiniCartMaskOpen","isOpen","handleClose","handleBeginEditItem","handleEndEditItem","handleDismiss","cartItems"],"mappings":";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AAEO,MAAMA,iBAAiB,GAAG,MAAM;AACnC,QAAM,CAAC;AAAEC,IAAAA;AAAF,GAAD,EAAa;AAAEC,IAAAA;AAAF,GAAb,IAAgC,yBAAtC;AACA,QAAM,CAACC,SAAD,IAAc,2BAApB;AACA,QAAM,GAAG;AAAEC,IAAAA;AAAF,GAAH,IAAyB,mCAA/B;AAEA,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoC,qBAAS,KAAT,CAA1C;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkB,qBAAS,MAAT,CAAxB;AAEA,QAAM;AAAEC,IAAAA,cAAF;AAAkBC,IAAAA,OAAlB;AAA2BC,IAAAA,SAA3B;AAAsCC,IAAAA;AAAtC,MAAyDT,SAA/D;AACA,QAAM;AAAEU,IAAAA;AAAF,MAAYH,OAAlB;AACA,QAAM;AAAEI,IAAAA,YAAF;AAAgBC,IAAAA,QAAhB;AAA0BC,IAAAA;AAA1B,MAAuCP,cAA7C;AAEA,QAAMQ,gBAAgB,GAClBV,IAAI,KAAK,SAAT,IACAA,IAAI,KAAK,MADT,IAEA,EAAGJ,SAAS,CAACe,OAAV,IAAqBX,IAAI,KAAK,MAA/B,IAA0CI,SAA1C,IAAuDN,aAAzD,CAHJ;AAKA,QAAMc,kBAAkB,GAAGZ,IAAI,KAAK,MAApC;AACA,QAAMa,MAAM,GAAGnB,MAAM,KAAK,MAA1B;AAEA,QAAMoB,WAAW,GAAG,wBAAY,MAAM;AAClCb,IAAAA,OAAO,CAAC,MAAD,CAAP;AACAF,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAJ,IAAAA,WAAW;AACd,GAJmB,EAIjB,CAACA,WAAD,EAAcM,OAAd,CAJiB,CAApB;AAMA,QAAMc,mBAAmB,GAAG,wBAAY,MAAM;AAC1ChB,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACH,GAF2B,EAEzB,EAFyB,CAA5B;AAIA,QAAMiB,iBAAiB,GAAG,wBAAY,MAAM;AACxCjB,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACH,GAFyB,EAEvB,EAFuB,CAA1B;AAIA,QAAMkB,aAAa,GAAG,wBAAY,MAAM;AACpChB,IAAAA,OAAO,CAAC,MAAD,CAAP;AACAJ,IAAAA,cAAc;AACjB,GAHqB,EAGnB,CAACA,cAAD,CAHmB,CAAtB;AAKA,SAAO;AACHqB,IAAAA,SAAS,EAAEZ,KADR;AAEHV,IAAAA,SAFG;AAGHW,IAAAA,YAHG;AAIHQ,IAAAA,mBAJG;AAKHE,IAAAA,aALG;AAMHD,IAAAA,iBANG;AAOHF,IAAAA,WAPG;AAQHhB,IAAAA,aARG;AASHM,IAAAA,SATG;AAUHQ,IAAAA,kBAVG;AAWHC,IAAAA,MAXG;AAYHR,IAAAA,cAZG;AAaHG,IAAAA,QAbG;AAcHP,IAAAA,OAdG;AAeHS,IAAAA,gBAfG;AAgBHV,IAAAA,IAhBG;AAiBHS,IAAAA;AAjBG,GAAP;AAmBH,CA1DM","sourcesContent":["import { useCallback, useState } from 'react';\n\nimport { useAppContext } from '@magento/peregrine/lib/context/app';\nimport { useCartContext } from '@magento/peregrine/lib/context/cart';\nimport { useCheckoutContext } from '@magento/peregrine/lib/context/checkout';\n\nexport const useLegacyMiniCart = () => {\n    const [{ drawer }, { closeDrawer }] = useAppContext();\n    const [cartState] = useCartContext();\n    const [, { cancelCheckout }] = useCheckoutContext();\n\n    const [isEditingItem, setIsEditingItem] = useState(false);\n    const [step, setStep] = useState('cart');\n\n    const { derivedDetails, details, isLoading, isUpdatingItem } = cartState;\n    const { items } = details;\n    const { currencyCode, numItems, subtotal } = derivedDetails;\n\n    const shouldShowFooter =\n        step === 'receipt' ||\n        step === 'form' ||\n        !((cartState.isEmpty && step === 'cart') || isLoading || isEditingItem);\n\n    const isMiniCartMaskOpen = step === 'form';\n    const isOpen = drawer === 'cart';\n\n    const handleClose = useCallback(() => {\n        setStep('cart');\n        setIsEditingItem(false);\n        closeDrawer();\n    }, [closeDrawer, setStep]);\n\n    const handleBeginEditItem = useCallback(() => {\n        setIsEditingItem(true);\n    }, []);\n\n    const handleEndEditItem = useCallback(() => {\n        setIsEditingItem(false);\n    }, []);\n\n    const handleDismiss = useCallback(() => {\n        setStep('cart');\n        cancelCheckout();\n    }, [cancelCheckout]);\n\n    return {\n        cartItems: items,\n        cartState,\n        currencyCode,\n        handleBeginEditItem,\n        handleDismiss,\n        handleEndEditItem,\n        handleClose,\n        isEditingItem,\n        isLoading,\n        isMiniCartMaskOpen,\n        isOpen,\n        isUpdatingItem,\n        numItems,\n        setStep,\n        shouldShowFooter,\n        step,\n        subtotal\n    };\n};\n"]}