{"version":3,"sources":["useProduct.js"],"names":["useProduct","props","beginEditItem","createCartMutation","getCartDetailsQuery","item","removeItemMutation","configurable_options","options","product","quantity","prices","price","small_image","image","name","isFavorite","setIsFavorite","isLoading","setIsLoading","removeItemFromCart","fetchCartId","removeItem","fetchCartDetails","handleFavoriteItem","handleEditItem","handleRemoveItem","productImage","url","productName","productOptions","productPrice","value","productQuantity"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEO,MAAMA,UAAU,GAAGC,KAAK,IAAI;AAC/B,QAAM;AACFC,IAAAA,aADE;AAEFC,IAAAA,kBAFE;AAGFC,IAAAA,mBAHE;AAIFC,IAAAA,IAJE;AAKFC,IAAAA;AALE,MAMFL,KANJ;AAOA,QAAM;AAAEM,IAAAA,oBAAoB,EAAEC,OAAxB;AAAiCC,IAAAA,OAAjC;AAA0CC,IAAAA,QAA1C;AAAoDC,IAAAA;AAApD,MAA+DN,IAArE;AACA,QAAM;AAAEO,IAAAA;AAAF,MAAYD,MAAlB;AACA,QAAM;AAAEE,IAAAA,WAAW,EAAEC,KAAf;AAAsBC,IAAAA;AAAtB,MAA+BN,OAArC;AAEA,QAAM,CAACO,UAAD,EAAaC,aAAb,IAA8B,qBAAS,KAAT,CAApC;AACA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4B,qBAAS,KAAT,CAAlC;AACA,QAAM,GAAG;AAAEC,IAAAA;AAAF,GAAH,IAA6B,2BAAnC;AAEA,QAAM,CAACC,WAAD,IAAgB,yBAAYlB,kBAAZ,CAAtB;AACA,QAAM,CAACmB,UAAD,IAAe,yBAAYhB,kBAAZ,CAArB;AACA,QAAMiB,gBAAgB,GAAG,kCAAcnB,mBAAd,CAAzB;AAEA,QAAMoB,kBAAkB,GAAG,wBAAY,MAAM;AACzCP,IAAAA,aAAa,CAAC,CAACD,UAAF,CAAb;AACH,GAF0B,EAExB,CAACA,UAAD,CAFwB,CAA3B;AAIA,QAAMS,cAAc,GAAG,wBAAY,MAAM;AACrCvB,IAAAA,aAAa,CAACG,IAAD,CAAb;AACH,GAFsB,EAEpB,CAACH,aAAD,EAAgBG,IAAhB,CAFoB,CAAvB;AAIA,QAAMqB,gBAAgB,GAAG,wBAAY,MAAM;AACvCP,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAC,IAAAA,kBAAkB,CAAC;AACff,MAAAA,IADe;AAEfkB,MAAAA,gBAFe;AAGfF,MAAAA,WAHe;AAIfC,MAAAA;AAJe,KAAD,CAAlB;AAMH,GARwB,EAQtB,CAACC,gBAAD,EAAmBF,WAAnB,EAAgChB,IAAhC,EAAsCiB,UAAtC,EAAkDF,kBAAlD,CARsB,CAAzB;AAUA,SAAO;AACHK,IAAAA,cADG;AAEHD,IAAAA,kBAFG;AAGHE,IAAAA,gBAHG;AAIHV,IAAAA,UAJG;AAKHE,IAAAA,SALG;AAMHS,IAAAA,YAAY,EAAEb,KAAK,CAACc,GANjB;AAOHC,IAAAA,WAAW,EAAEd,IAPV;AAQHe,IAAAA,cAAc,EAAEtB,OARb;AASHuB,IAAAA,YAAY,EAAEnB,KAAK,CAACoB,KATjB;AAUHC,IAAAA,eAAe,EAAEvB;AAVd,GAAP;AAYH,CAlDM","sourcesContent":["import { useCallback, useState } from 'react';\nimport { useMutation } from '@apollo/client';\nimport { useCartContext } from '@magento/peregrine/lib/context/cart';\nimport { useAwaitQuery } from '@magento/peregrine/lib/hooks/useAwaitQuery';\n\nexport const useProduct = props => {\n    const {\n        beginEditItem,\n        createCartMutation,\n        getCartDetailsQuery,\n        item,\n        removeItemMutation\n    } = props;\n    const { configurable_options: options, product, quantity, prices } = item;\n    const { price } = prices;\n    const { small_image: image, name } = product;\n\n    const [isFavorite, setIsFavorite] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const [, { removeItemFromCart }] = useCartContext();\n\n    const [fetchCartId] = useMutation(createCartMutation);\n    const [removeItem] = useMutation(removeItemMutation);\n    const fetchCartDetails = useAwaitQuery(getCartDetailsQuery);\n\n    const handleFavoriteItem = useCallback(() => {\n        setIsFavorite(!isFavorite);\n    }, [isFavorite]);\n\n    const handleEditItem = useCallback(() => {\n        beginEditItem(item);\n    }, [beginEditItem, item]);\n\n    const handleRemoveItem = useCallback(() => {\n        setIsLoading(true);\n        removeItemFromCart({\n            item,\n            fetchCartDetails,\n            fetchCartId,\n            removeItem\n        });\n    }, [fetchCartDetails, fetchCartId, item, removeItem, removeItemFromCart]);\n\n    return {\n        handleEditItem,\n        handleFavoriteItem,\n        handleRemoveItem,\n        isFavorite,\n        isLoading,\n        productImage: image.url,\n        productName: name,\n        productOptions: options,\n        productPrice: price.value,\n        productQuantity: quantity\n    };\n};\n"]}