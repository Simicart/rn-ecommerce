{"version":3,"sources":["useMyAccount.js"],"names":["useMyAccount","props","onSignOut","closeDrawer","location","shouldCloseDrawer","handleSignOut","current","key"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AAEA;;;;;;;;;AASO,MAAMA,YAAY,GAAGC,KAAK,IAAI;AACjC,QAAM;AAAEC,IAAAA;AAAF,MAAgBD,KAAtB;AAEA,QAAM,GAAG;AAAEE,IAAAA;AAAF,GAAH,IAAsB,yBAA5B;AACA,QAAMC,QAAQ,GAAG,kCAAjB;AACA,QAAMC,iBAAiB,GAAG,mBAAO,KAAP,CAA1B;AAEA,QAAMC,aAAa,GAAG,wBAAY,MAAM;AACpCH,IAAAA,WAAW;AACXD,IAAAA,SAAS;AACZ,GAHqB,EAGnB,CAACC,WAAD,EAAcD,SAAd,CAHmB,CAAtB,CAPiC,CAYjC;;AACA,wBAAU,MAAM;AACZ;AACA;AACA;AACA,QAAIG,iBAAiB,CAACE,OAAtB,EAA+B;AAC3BJ,MAAAA,WAAW;AACd,KAFD,MAEO;AACHE,MAAAA,iBAAiB,CAACE,OAAlB,GAA4B,IAA5B;AACH;AACJ,GATD,EASG,CAACJ,WAAD,EAAcC,QAAQ,CAACI,GAAvB,CATH;AAWA,SAAO;AACHF,IAAAA;AADG,GAAP;AAGH,CA3BM","sourcesContent":["import { useCallback, useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { useAppContext } from '@magento/peregrine/lib/context/app';\n\n/**\n * The useMyAccount talon complements the MyAccount component.\n *\n * @param {Object}      props\n * @param {Function}    props.onSignOut - a function to call when the user signs out.\n *\n * @returns {Object}    result\n * @returns {Function}  result.handleSignOut - A callback function to attach to the sign out button.\n */\nexport const useMyAccount = props => {\n    const { onSignOut } = props;\n\n    const [, { closeDrawer }] = useAppContext();\n    const location = useLocation();\n    const shouldCloseDrawer = useRef(false);\n\n    const handleSignOut = useCallback(() => {\n        closeDrawer();\n        onSignOut();\n    }, [closeDrawer, onSignOut]);\n\n    // Whenever the page changes, close the drawer.\n    useEffect(() => {\n        // The very first time MyAccount renders, this effect is fired.\n        // Don't close the drawer on that occasion, but do so every time\n        // location changes thereafter.\n        if (shouldCloseDrawer.current) {\n            closeDrawer();\n        } else {\n            shouldCloseDrawer.current = true;\n        }\n    }, [closeDrawer, location.key]);\n\n    return {\n        handleSignOut\n    };\n};\n"]}